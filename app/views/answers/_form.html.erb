<div class="row">
  <%= form_for answer, id: 'answer_form', url: { action: action } do |form| %>
    <% if answer.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(answer.errors.count, "error") %> prohibited this answer from being saved:</h2>

        <ul>
          <% answer.errors.each do |error| %>
            <li><%= error.full_message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="field mb-3">
      <%= form.label :text, class: "form-label" %>
      <%= form.text_field :text, class: "form-control" %>
    </div>

    <div class="field mb-3 justify-content-center">
      <%= form.label :variable_mods %>
      <table>
        <% @variables&.each do |variable| %>
          <tr>
            <td><label for='answer[variable_mods][<%= variable %>]' class='form-label'><%= variable %>: </label></td>
            <td>
              <input multiple='multiple' type='number'
                     value='<%= answer.variable_mods[variable] if answer.variable_mods.present? && answer.variable_mods.has_key?(variable) %>'
                     name='answer[variable_mods][<%= variable %>]'
                     placeholder='<%= variable %>' class='form-control'>
            </td>
          </tr>
        <% end %>
      </table>
    </div>

    <div id="next_question_order_container">
      <div class="field mb-3" id="next_question_order">
        <%= form.label :next_question_order, class: "form-label" %>
        <%= form.number_field :next_question_order, class: "form-control" %>
      </div>

      <div class="mb-2 text-center">
        <button type="button"
                id="end_scenario_button"
                class="btn btn-sm btn-outline-warning">
          End of Scenario <span id="end_of_quiz_icon"></span>
        </button>
        <i class="fas fa-question-circle color-orange"
           data-bs-toggle="tooltip"
           data-bs-placement="right"
           data-bs-html="true"
           title="Toggle whether or not this question leads to the end of the scenario."></i>
      </div>

    </div>

    <div class="actions text-center">
      <%= form.submit nil, class: "btn btn-primary" %>
    </div>
  <% end %>
</div>

<%= javascript_pack_tag 'erb_form_functions' %>
